Константин Казарин, [23.08.17 09:10]
Окс - объект капитального строительства

Константин Казарин, [23.08.17 09:10]
Осср - объект сводного сметного расчета

Константин Казарин, [23.08.17 09:11]
Глава ССР - глава сводного сметного расчёта

Константин Казарин, [23.08.17 09:12]
Окс состоит из одного или нескольких осср

Константин Казарин, [24.08.17 11:08]
Код Окс - идентификатор объекта, код вида ОКС - характеристика объекта, по этому коду определяется его принадлежность к определенной группе, для сбора и распределения затрат код вида окс не нужен.

Константин Казарин, [24.08.17 11:11]
Прямые затраты относятся на конкретный ОССР и ОКС, т.е код ОКС и код ОССР отличен от "0000", 
Если код ОКС и ОССР "0000" то эти затраты косвенные, они относятся на проект в целом и их нужно распределять на стоимости каждого ОКС пропорционально доли прямых затрат.

Константин Казарин, [24.08.17 11:12]
Косвенные затраты сначала распределяются на ОКС, а потом с ОКС на ОССР, входящие в его состав

Константин Казарин, [24.08.17 13:00]
Дальше потребуется графа 12 строительные работы, графа 13 монтажные работы и графа 16 всего.

Константин Казарин, [24.08.17 13:02]
В зависимости от того в какой главе ССР находятся косвенные затраты выбирается база для их распределения.

Константин Казарин, [24.08.17 13:04]
Базой может быть стоимость по графе 12 плюс стоимость по графе 13 или общая стоимость по графе 18

Константин Казарин, [24.08.17 13:05]
В описании есть ещё такие термины как прочие затраты подрядчика и прочие затраты заказчика, но для пилота эти нюансы можно опустить.

Константин Казарин, [25.08.17 10:35]
Да, где нет кода вида затрат это подытоги, которые можно исключить

Константин Казарин, [25.08.17 15:18]
Илья поправил реестр, там были ошибки в его оформлении. Скинул на почту

Константин Казарин, [25.08.17 15:19]
Строки нужно выбирать у которых указан код вида затрат и машинный номер сметы.

Константин Казарин, [25.08.17 15:20]
Итог общий соответствует итогу по главам 1-12 (строка 731, графа 16)

Константин Казарин, [25.08.17 15:28]
Файл формируется программно, кодировка пока вручную, из за этого косяки. Деньги считаются точно. По сути каждая строчка с кодом вида затрат и машинным номером сметы это ссылка на физический документ, в котором стоимость сформирована ещё на более детальном уровне.

Константин Казарин, [28.08.17 10:32]
Для чистоты эксперимента лучше сначала отбросить пустые виды затрат и пустой машинный номер, и с получившейся выборкой работать